<p id="notice"><%= notice %></p>

<div class="display-4">Tasks</div>

  <div class="container">
    <div class="row">
      <%= form_for :task, url: tasks_path do |form| %>
        <div class="col-md-6">
          <div class="field">
            <%= form.text_field :text, id: :task_text %>
          </div>
        </div>
        <div class="col-md-6">
          <div class="actions">
            <%= form.submit %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <div class="container">
    <%= render partial: 'tasks' %>
  </div>


<script>

    function updateTask(id) {
        console.log('updating task with id', id);
        $.ajax({
                type: 'PUT',
                url: "<%= tasks_path %>/" + id,
                contentType: 'application/json',
                success: function (response) {
                    $('#task_' + id).css('color', 'red');
                    $('#task_button_'+id).remove('#task_button_'+id);
                },
                error: function (error){
                    alert(error.responseText);
                }        });
    }
</script>